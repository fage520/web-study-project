when:
  - event: push
    branch: main
steps:
  - name: build
    image: gplane/pnpm:9.15.1-node22-alpine
    commands:
      - echo "开始构建"
      - pnpm install
      - pnpm run build
      - echo "构建完成"
  # 构建docker镜像
  - name: docker-build
    image: woodpeckerci/plugin-docker-buildx
    settings:
      dockerfile: Dockerfile
      platforms: linux/amd64
      repo: fage520docker/web-study-project
      tags: ${CI_COMMIT_MESSAGE}-${CI_PIPELINE_CREATED}
      username: 
        from_secret: docker_name
      password:
        from_secret: docker_token